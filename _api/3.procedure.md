---
entityName: Procedure
subjects:
      - name: Proc
        methods:
           - message
           - reportOptions
           - documentOptions?
           - inputFields
           - inputOptions
           - inputHelp
           - continueProc
           - cancel
           - choose
           - searchAction
           - ProcSuccessCallback
           - ProcProgressCallback
           - ProcErrorCallback
           - ProcError
           - OpenChooseCallback
           - SearchActionCallback
layout: api
permalink: /api/procedure/
---

<a name="Proc"></a>
## Proc

**Properties**

| Name | Type | Description |
| --- | --- | --- |
| name | string| The procedure's unique uppercase 'Priority' name. |
| title | string| The procedure's descriptive title. |


<br/>
<br/>

<a name="message"></a>

### message(ok, successCallback, errorCallback)
Called after a message is approved or canceled.
Call as a response to a procedure [`message`](#DSMessage).

| Param | Type | Description |
| --- | --- | --- |
| ok | <code>number</code> | 1: OK, 0: Cancel (If the message only contains one button, either number is accepted). |
| successCallback | <code>[SuccessCallback](#SuccessCallback)</code> | Called on success. |
| errorCallback | <code>[ErrorCallback](#ErrorCallback)</code> | Called on error. |

<br/>
<br/>

<a name="reportOptions"></a>

### reportOptions(ok, selectedFormat, successCallback, errorCallback)
Call after reportOptions step
Call as a response to a report generating procedure's [`report options`](#DSReportOptions).

| Param | Type | Description |
| --- | --- | --- |
| ok | <code>number</code> | 1: OK, 0: Cancel. |
| selectedFormat | <code>number</code> | Selected format. |
| successCallback | <code>[SuccessCallback](#SuccessCallback)</code> | Called on success. |
| errorCallback | <code>[ErrorCallback](#ErrorCallback)</code> | Called on error. |


<br/>
<br/>

<a name="reportOptions"></a>

### documentOptions(ok, selectedFormat, pdf, successCallback, errorCallback)
Call after documentOptions step
Call as a response to a document generating procedure's [`document options`](#DSDocOptions).


| Param | Type | Description |
| --- | --- | --- |
| ok | <code>number</code> | 1: OK, 0: Cancel. |
| selectedFormat | <code>number</code> | The selected format. |
| pdf | <code>number</code> | 1: PDF, 2: HTML. |
| successCallback | <code>[SuccessCallback](#SuccessCallback)</code> | called on success. |
| errorCallback | <code>[ErrorCallback](#ErrorCallback)</code> | called on error. |


<br/>
<br/>

<a name="inputFields"></a>

### inputFields(ok, data, successCallback, errorCallback)
Call after inputFields step
Call as a response to a procedure's [`input fields`](#DSInputFields).


| Param | Type | Description |
| --- | --- | --- |
| ok | <code>number</code> | 1: OK, 0: Cancel. |
| data | <code>Object</code> | Input fields data (JSON): <pre> { 		EditFields: [ 		{ 			field: (number) - field ID 			value: (string) - field value 			op:	(number) - operator ID 			value2: (string) - value2 			op2: (number) - operator2 ID 		} 		... 		] } </pre> |
| successCallback | <code>[SuccessCallback](#SuccessCallback)</code> | called on success. |
| errorCallback | <code>[ErrorCallback](#ErrorCallback)</code> | called on error. |


<br/>
<br/>

<a name="inputOptions"></a>

### inputOptions(ok, selection, successCallback, errorCallback)
Call after inputOptions step
Call as a response to a procedure's [`input choice`](#DSInputChoose).


| Param | Type | Description |
| --- | --- | --- |
| ok | <code>number</code> | 1: OK, 0: Cancel. |
| selection | <code>number</code> | selected option ID. |
| successCallback | <code>[SuccessCallback](#SuccessCallback)</code> | called on success. |
| errorCallback | <code>[ErrorCallback](#ErrorCallback)</code> | called on error. |


<br/>
<br/>

<a name="inputHelp"></a>

### inputHelp(ok, successCallback, errorCallback)
Call after inputHelp step
Call as a response to a procedure's [`help dialog`](#DSHelpDialog).



| Param | Type | Description |
| --- | --- | --- |
| ok | <code>number</code> | 1: OK, 0: Cancel. |
| successCallback | <code>[SuccessCallback](#SuccessCallback)</code> | called on success. |
| errorCallback | <code>[ErrorCallback](#ErrorCallback)</code> | called on error. |


<br/>
<br/>

<a name="continueProc"></a>

### continueProc(successCallback, errorCallback)
Call this method after completing a procedure step.



| Param | Type | Description |
| --- | --- | --- |
| successCallback | <code>[SuccessCallback](#SuccessCallback)</code> | called on success. |
| errorCallback | <code>[ErrorCallback](#ErrorCallback)</code> | called on error. |


<br/>
<br/>

<a name="cancel"></a>

### cancel(successCallback, errorCallback)
Cancel procedure.



| Param | Type | Description |
| --- | --- | --- |
| successCallback | <code>[SuccessCallback](#SuccessCallback)</code> | called on success. |
| errorCallback | <code>[ErrorCallback](#ErrorCallback)</code> | called on error. |


<br/>
<br/>

<a name="choose"></a>

### choose(fieldId, value, data, successCallback, errorCallback)
Opens a choose/search operation for a specified field.
 **Note:** 
 If the field currently cotains a value, it will automatically be filled in as `fieldValue`, even if a different `fieldValue` was specified. 


| Param | Type | Description |
| --- | --- | --- |
| fieldId | <code>number</code> | ID of field. |
| value | <code>string</code> | Current value in field. |
| data | <code>Object</code> | Data in all fields (Choose/Search results may vary depening on other fields' values). ```js { 		ChooseFields: [ 		{ 			field: (number) - field ID 			value: (string) - field value 		} 		... 		] } ``` |
| successCallback | <code>[OpenChooseCallback](#OpenChooseCallback)</code> | Called on success. |
| errorCallback | <code>[ErrorCallback](#ErrorCallback)</code> | Called on error. |


<br/>
<br/>

<a name="searchAction"></a>

### searchAction(fieldId, value, action, data, successCallback, errorCallback)
Perform action in search dialog.
Performs one of the following actions on the previously opened choose/search field:
- Next(1) - Retrieve more search results.
- Prev(2) - Retrieves the previous search results. 
            Usually, this action is unecessary, as previously retrieved results are cached locally.
- TypeChange(3) - Change the 'search-by' method.
  Available methods are: _By Name_, _By Number_, _By Foreign Name_.
- TextChange(4) - Changes the search query text.
- StartChange(5) - Specifies that the search should look for results that **start** with the query text.
- IgnoreCaseChanged(6) - When running a search in English (or other languages with uppercase and lowercase), toggles the 'ignoreCase' flag on or off.


| Param | Type | Description |
| --- | --- | --- |
| fieldId | <code>number</code> | ID of field. |
| value | <code>string</code> | Current value in field. |
| action | <code>number</code> | One of: Next(1),Prev(2),TypeChange(3),TextChange(4),StartChange(5),IgnoreCaseChanged(6) |
| data | <code>Object</code> | Data in all fields (Search may be dependent on other fields' values). <pre> { 		ChooseFields: [ 		{ 			field: (number) - field ID 			value: (string) - field value 		} 		... 		] } </pre> |
| successCallback | <code>[SearchActionCallback](#SearchActionCallback)</code> | called on success. |
| errorCallback | <code>[ErrorCallback](#ErrorCallback)</code> | called on error. |


<br/>
<br/>

<a name="ProcSuccessCallback"></a>
### ProcSuccessCallback : <code>function</code>

| Param | Type | Description |
| --- | --- | --- |
| data | <code>Object</code> | Result data.|

Data may be of the following structures: 

<a name="DSInputFields"></a>
**1) Input Dialog with Input Fields**
Presents fields that require user input so the procedure can run.

   {
    type: "inputFields",

    input: 
    
    { 	
        
        EditFields: 

        [ 	
            
            { 

                columntype: (string) - "Str" / "Rstr" / "Bool" / "Real" / "Int" / "Date8" / "Date10" / "Date14" / "Time5" / "Time6" 	
                
                field: (number) - field ID 				
                
                helpstring: (string) - field help text 
                
                isboolean: (boolean) - is the field a boolean 
                
                ispassword: (boolean) - is the field a password field
                
                mandatory: (boolean) - Indicates that this field is mandatory and must be filled 			
                
                operator: (number) - default operator (saved from last run)
                
                readonly: (boolean) - is the field readonly, i.e., it must use values from a choose list 		
                
                title: (string) - field title 				
                
                value: (string) - default value (saved from last run) 		
                
                value1: (string) - default value1 (if the operator is "between") 
                
                width: (number) - field width 
                
                zoom: (string - "None" / "Attach" / "Search" / "Choose" / "Zoom" / "Date14" /  "Date8" / "Date10" / "EMail" / "URL" / "HiddenZoom" / "LinkFile" / "QEdit" / "SpecialAttach")

           } 			
           
           ... 	
        ],  		
        
        Operators: 

        [ 
           
           { 	

              name: (string) - operator name 			
              
              op: (number) - operator ID 	
              
              title: (string) - operator title 

           } 
           
           ... 

        ], 
        
        text: (string) - help text,		
        
        title: (string) - title of dialog

    }

  } 

<a name="DSInputChoose"></a>
**2) Input Dialog with Choose Field**
An input where the user can only choose one option. In **Priority's** web interface, these would show as radio buttons (if there are more than 8, shows a listbox instead).

  {
    type: "inputOptions", 		
    
    input: 

    { 

        Options:

        [ 

          { 

            field: (number) - option ID 
            
            help: (string) - help text 
            
            name: (string) - option name 
            
            selected: (boolean) - is option selected (only one can be selected)
            
            title: (string) - option title 	

          } 
          
          ... 

        ], 	
        
        text: (string) - help text, 	
        
        title: (string) - title of dialog 

    } 

   } 

<a name="DSHelpDialog"></a>
**3) Help Dialog**
Some procedures include an introductory dialog that contains help text, with OK (proceed) and Cancel buttons.	

   { 		
    type: "inputHelp", 	
    
    input: 

    { 

        text: (string) - help text, 
        
        title: (string) - title of dialog 

    }

   }

<a name="DSMessage"></a>
**4) Error/Warning Message**
An error/warning/information message provided by the procedure.
   {

    type: "message",  	
    
    message: (string) - message text,  
    
    messagetype: (string) - "information" / "warning" / "error" 

   }

<a name="DSReportOptions"></a>
**5) New Report Dialog** 
If a report has multiple formats defined, this dialog allows you to choose which one to use when producing the report.
   { 

    type: "reportOptions",
    
    formats: 

    [ 

      {  

        format: (number) - format ID  	
        
        selected: (boolean) - is selected 
        
        title:	(string) - format title 

      } 
     
      ...  

    ]  

   } 

<a name="DSDocOptions"></a>
**6) New Document Dialog**
If a document has multiple formats defined, this dialog allows you to choose which one to use when producing the document.
   { 

    type: "documentOptions", 
    
    formats: 
    [ 

      { 

        format: (number) - format ID  	
        
        selected: (boolean) - is selected  		
        
        title:	(string) - format title  

      }  

      ... 

    ], 
    
    pdf: (boolean) - is PDF Check box checked. If true, the procedure will produce a PDF file (as opposed to a HTML report)  

   }  

**7) Display URL** 
Shows the url of a generated report.
   {  

    type: "displayUrl",  
    
    Urls: 

    [  	

      {  	
        action: "display" (Only supported action currently)  	
        
        url: (string) - the URL to display 
      }  
      
      ... 
    ] 

   }

**8) End** 
Indicates the procedure is over.

   { 	

    type: "end" 

   }

<br/>

<a name="ProcProgressCallback"></a>
### ProcProgressCallback : <code>function</code>

Use this function to update a progress bar. This function is called by the SDK whenever a progress bar is called on the server by the procedure itself.

Note that as long as a progress bar was not called by the procedure, this function WOULD NOT be called, even if the procedre is taking a long time (e.g., due to a long-running query).

Therefore, you should always use some sort of action indicator. Change it to a percentage indicator when this callback is called.

| **Param** | **Type** | **Description** |
| --- | --- | --- |
| proc |`Proc` | Procedure Object. |
| progress | <code>Number</code> | 0-100. |

<br/>

<a name="ProcErrorCallback"></a>
### ProcErrorCallback : <code>function</code>

| **Param** | **Type** | **Description** |
| --- | --- | --- |
| proc | `Proc`| Procedure Object. |
| error | [`ProcError`](#ProcError) | Object.{ type: (string) - type of message: "NotSupported" / "ServerBusy" / "Error", text: (string) - text of message }  |

<br>

<a name="ProcError"></a>
### ProcError : <code>Object</code>
**Properties**

| **Name** | **Type** | **Description** |
| --- | --- | --- |
| type | <code>string</code> | The error type: "NotSupported" / "ServerBusy" / "Error" |
| text | <code>string</code> | Error text |

<br/>
<br/>

<a name="OpenChooseCallback"></a>

### OpenChooseCallback : <code>function</code>
  

| Param | Type | Description |
| --- | --- | --- |
| searchObj | <code>[Search](#Form..Search)</code> | A choose or search object. |


<br/>
<br/>

<a name="SearchActionCallback"></a>

### SearchActionCallback : <code>function</code>
  

| Param | Type | Description |
| --- | --- | --- |
| result | <code>[Search](#Form..Search)</code> | A search object |


<br/>
