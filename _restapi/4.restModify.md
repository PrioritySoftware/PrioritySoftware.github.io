---
title: Modifying Data
methods:
       - Creating an Entity
       - Creating an Entity Including Deep Inserts
       - Updating an Entity
       - Updating an Entity Including Deep Inserts
       - Writing to a Text Form
       - Deleting an Entity
       - Error Handling       
layout: docs_nav
permalink: /restapi/modify/
collection-title: REST API
---

<a name="Modifying Data"></a>
## Modifying Data

The OData service supports Create, Update and Delete operations for some or all exposed entities. Please note that data modification via the API is only available in **Priority** version 17.2 and above.

<a class="anchor-link" name="Creating_an_Entity"></a>
### Creating an Entity

To create an entity in a collection, the client sends a POST request to that collection's URL. The POST body MUST contain a single valid entity's information. The request below creates a new part family in the **Part Families** form.

```html
POST serviceRoot/FAMILY_LOG 
OData-Version: 4.0
Content-Type: application/json;odata.metadata=minimal
Accept: application/json

{
    "FAMILYNAME": "765",
    "FAMILYDESC": "My OData Family"
}
```

Response Payload
```json
{
  "@odata.context": "serviceRoot/$metadata#FAMILY_LOG/$entity",
  "FAMILYNAME": "765",
  "FAMILYDESC": "My OData Family",
  "EFAMILYDES": null,
  "TECHFLAG": null,
  "DEBITFLAG": null,
  "PROJPROCESS": null,
  ...
  "FAMILY": 26
}
```

<a class="anchor-link" name="Creating_an_Entity_Including_Deep_Inserts"></a>
### Creating an Entity Including Deep Inserts

To create an entity that includes related entities (for example, an ORDER with the relevant ORDERITEMS), specify the values for the related resources as part of the request.

```html
POST serviceRoot/ORDERS 
OData-Version: 4.0
Content-Type: application/json;odata.metadata=minimal
Accept: application/json
{
    "CUSTNAME": "007",
    "ORDERITEMS_SUBFORM": [
        {
            "PARTNAME": "111-001",
            "DUEDATE": "2016-08-01T00:00:00+03:00"
        },
        {
            "PARTNAME": "111-002",
            "DUEDATE": "2016-08-01T00:00:00+03:00"
        }
     ]
}
```

Response Payload
```json
{
  "@odata.context": "serviceRoot/$metadata#ORDERS/$entity",
  "CUSTNAME": "007",
  "CDES": "ACME Inc.",
  "NAME": null,
  "POSITIONDES": null,
  "CURDATE": "2016-08-07T00:00:00+03:00",
  "ORDNAME": "SO16000007",
  "BOOKNUM": null,
  "DOCNO": null,
  "PROJDES": null,
  "ORDSTATUSDES": "Draft",
  "BOOLCLOSED": null,
  ...
  "PIKORDER": 0,
  "FOLLOWUPIV": 88
}
```


<a class="anchor-link" name="Updating_an_Entity"></a>
### Updating an Entity

To update an existing entity, send a PATCH request with the values you wish to modify. You can also use PUT, but the semantics for PUT require all properties to be either sent on the wire or reverted to their default values.

```html
PATCH serviceRoot/FAMILY_LOG('765')
OData-Version: 4.0
Content-Type: application/json;odata.metadata=minimal
Accept: application/json

{
    "FAMILYDESC": "My Updated Family"
}
```

Response Payload

```json
{
  "@odata.context": "serviceRoot/$metadata#FAMILY_LOG/$entity",
  "FAMILYNAME": "765",
  "FAMILYDESC": "My Updated Family",
  "EFAMILYDES": null,
  "TECHFLAG": null,
  "DEBITFLAG": null,
  "PROJPROCESS": null,
  ...
  "FAMILY": 26
}
```

<a class="anchor-link" name="Updating_an_Entity_Including_Deep_Inserts"></a>
### Updating an Entity Including Deep Inserts
To update an entity with additional related entities (for example, additional ORDERITEMS in an ORDER), specify the values for the related resources as part of the request.

```html
PATCH serviceRoot/ORDERS(ORDNAME='SO17000004')
OData-Version: 4.0
Content-Type: application/json;odata.metadata=minimal
Accept: application/json

{      
    "ORDERITEMS_SUBFORM" : [
        {PARTNAME: "111-001", QUANT: 1},
        {PARTNAME: "111-002", QUANT: 2}
    ]
}
```



<a class="anchor-link" name="Writing_to_a_Text_Form"></a>
### Writing to a Text Form
Making updates to a text subform is similar to updating with a deep insert.
The maximum amount of characters for the "TEXT" field is specified in the $metadata file.
The request below demonstrates adding text to the "Remarks" in the DOCUMENTS_D form:

```html
PATCH /ui/odata/Priority/tabmob.ini/usdemo/DOCUMENTS_D(DOCNO='SH17000002',TYPE='D') HTTP/1.1
Host: www.eshbelsaas.com
Content-Type: application/json
Authorization: Basic YXBpZGVtbzoxMjM=
Cache-Control: no-cache
Postman-Token: 09860195-d461-a1ba-38cf-337080f9c341

{
    "DOCUMENTSTEXT_SUBFORM" : [
    {
        "TEXT": "<p>Test Line 1</p>",
        "TEXTLINE": 1
    },
    {
        "TEXT": "<p>Test Line 2</p>",
        "TEXTLINE": 2
    },
    {
        "TEXT":"<p>Test Line 3</p>",
        "TEXTLINE": 3
    }]
}
```

<a class="anchor-link" name="Deleting_an_Entity"></a>
### Deleting an Entity

To remove a resource, send an HTTP Delete to the resource URL.

<code>DELETE serviceRoot/FAMILY_LOG('765')</code>

<a class="anchor-link" name="Error_Handling"></a>
### Error Handling

Since the API is essentially a wrapper around the **Priority** screens, any errors generated by the screens are included in the response. The example below demonstrates an attempt to create a new FAMILY_LOG entity with an invalid value for the DEBITFLAG field.

```html
POST serviceRoot/FAMILY_LOG 
OData-Version: 4.0
Content-Type: application/json;odata.metadata=minimal
Accept: application/json

{
    "FAMILYNAME": "765",
    "FAMILYDESC": "My OData Family"
    "DEBITFLAG": "Q"
}
```

Response Payload

```xml
<FORM
  TYPE="FAMILY_LOG">
    <FAMILY_LOG>
        <FAMILYNAME>790</FAMILYNAME>
        <FAMILYDESC>My invalid OData Family</FAMILYDESC>
        <DEBITFLAG>Q</DEBITFLAG>
        <FAMILY>0</FAMILY>
    </FAMILY_LOG>
    <InterfaceErrors>
        <text>Specify 'N' or 'Y' as the default value that will be filled in the Billable column of the "Reports of Project Hrs/Expenses" form. /n Leave the column blank if you do not want to have a default.</text>
    </InterfaceErrors>
</FORM>
```

